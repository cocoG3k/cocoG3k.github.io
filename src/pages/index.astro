---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const diaryEntries = (await getCollection("diary")).sort(
  (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);

const formatDate = (date: Date) => date.toISOString().split("T")[0].replace(/-/g, ".");
---

<BaseLayout
  title="Coco G3k | 小さな日記"
  description="Astroで作る、穏やかな日記の個人ページ"
>
  <main>
    <header>
      <div class="brand">Coco G3k</div>
      <nav>
        <a href="/diary">日記一覧</a>
        <a href="/diary">最新記事</a>
        <a href="/diary">記事の余白</a>
        <a href="/diary">この場所</a>
        <a href="/diary">おたより</a>
      </nav>
    </header>

    <section class="hero" id="intro">
      <div>
        <span class="badge">穏やかな日記 / Coffee & Light</span>
        <h1>静かな日々を、やわらかく綴る場所。</h1>
        <p>
          朝の光やお気に入りの音楽、ふと浮かんだことを短い文章で記録しています。
          ひと息つけるような、穏やかな余白のあるページを目指しました。
        </p>
        <div class="hero-actions">
          <a class="button primary" href="/diary">最新の記録を見る</a>
          <a class="button" href="/diary">日記一覧へ</a>
        </div>
      </div>
      <div class="card">
        <h3>最新記事の一節</h3>
        <p>
          窓を開けると、雨上がりの匂いがふわり。最新の記事に書いた、
          湯気の立つカップと、うすい靴下がちょうどいい一日。
        </p>
      </div>
    </section>

    <section id="diary">
      <h2 class="section-title">最新記事</h2>
      <div class="diary-list diary-card-grid">
        {diaryEntries.map((entry) => (
          <article class="diary-entry diary-card">
            <span class="entry-date">{formatDate(entry.data.date)}</span>
            <h3>{entry.data.title}</h3>
            <p>{entry.data.description}</p>
          </article>
        ))}
      </div>
      <div class="card-grid" style="margin-top: 24px;">
        <article class="card">
          <h3>最近の気づき</h3>
          <p>午前9時の静けさと、夕方17時の光の色を今日の記事にまとめました。</p>
        </article>
        <article class="card">
          <h3>今日の音</h3>
          <p>柔らかなピアノと、湯気のように薄いアンビエントを最新記事で紹介。</p>
        </article>
        <article class="card">
          <h3>手帳の一言</h3>
          <p>「ゆっくりでも、少しずつ」。最新記事に小さなメモを添えています。</p>
        </article>
      </div>
    </section>

    <section id="about">
      <h2 class="section-title">この場所について</h2>
      <div class="timeline">
        <div class="timeline-item">
          <span class="badge">Daily</span>
          <h3>暮らしのリズム</h3>
          <p>朝はゆっくり、夜は灯りを落として。小さな変化を大切にしています。</p>
        </div>
        <div class="timeline-item">
          <span class="badge">Notes</span>
          <h3>記録の仕方</h3>
          <p>写真や短い文章で、その日の気分や光の色を残します。</p>
        </div>
        <div class="timeline-item">
          <span class="badge">Quiet</span>
          <h3>この場所について</h3>
          <p>静かな時間に寄り添えるよう、読みやすさを第一にしています。</p>
        </div>
      </div>
    </section>

    <section id="contact">
      <h2 class="section-title">おたより</h2>
      <div class="card">
        <p>
          ひとことでも、長い手紙でも。静かにやりとりできる場所として使っています。
          下記アドレスまでお気軽にどうぞ。
        </p>
        <p style="margin-top: 16px; font-weight: 600;">hello@cocog3k.studio</p>
      </div>
    </section>

    <footer>
      <span>© 2024 Coco G3k. Written with calm.</span>
      <span>Tokyo / Home desk</span>
    </footer>
  </main>
</BaseLayout>
